<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹æ„›ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨ºæ–­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 to-purple-50 min-h-screen">
    <!-- ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ -->
    <div id="homePage" class="flex items-center justify-center min-h-screen p-4">
        <div class="max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center fade-in">
            <div class="mb-6">
                <div class="text-4xl mb-4">ğŸ’•ğŸµğŸ”§ğŸ’•ğŸ›¡ï¸</div>
                <h1 class="text-3xl font-bold text-gray-800 mb-4">
                    æ‹æ„›ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨ºæ–­
                </h1>
                <p class="text-gray-600 mb-4">
                    20å•ã§åˆ†ã‹ã‚‹ï¼ã‚ãªãŸã®æ‹æ„›ã‚­ãƒ£ãƒ©ã¯ï¼Ÿ
                </p>
                <div class="bg-pink-50 rounded-lg p-4 mb-4">
                    <p class="text-sm text-pink-600 font-medium">
                        ğŸ¯ è¨ºæ–­çµæœã¯æ¨ã—ã‚­ãƒ£ãƒ©ã«ãªã‚Œã‚‹ï¼<br>
                        ğŸ“± ã‚·ã‚§ã‚¢ã§ç››ã‚Šä¸ŠãŒã‚ã†ï¼<br>
                        ğŸ’• ã‚ãªãŸã«ä¼¼ãŸã‚¿ã‚¤ãƒ—ãŒé›†ã¾ã‚‹å ´æ‰€
                    </p>
                </div>
            </div>
            <button onclick="startDiagnosis()" class="w-full bg-pink-500 hover:bg-pink-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 mb-3">
                ğŸ­ è¨ºæ–­ã‚’å§‹ã‚ã‚‹
            </button>
            <p class="text-xs text-gray-500">
                #æ‹æ„›è¨ºæ–­ #æ¨ã—ã‚­ãƒ£ãƒ© #ã‚ã‹ã‚‹äººé›†ã¾ã‚Œ
            </p>
        </div>
    </div>

    <!-- è¨ºæ–­ãƒšãƒ¼ã‚¸ -->
    <div id="diagnosisPage" class="hidden">
        <div class="min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4">
            <div class="max-w-2xl w-full bg-white rounded-lg shadow-lg p-8 fade-in">
                <!-- é€²æ—è¡¨ç¤º -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm text-gray-600">
                            è³ªå• <span id="currentQuestion">1</span> / 20
                        </span>
                        <span class="text-sm text-gray-600">
                            ã‚«ãƒ†ã‚´ãƒª: <span id="currentCategory">LAT</span>
                        </span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-pink-500 h-2 rounded-full transition-all duration-300" style="width: 5%"></div>
                    </div>
                </div>

                <!-- è³ªå•æ–‡ -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">
                        Q<span id="questionNumber">1</span>
                    </h2>
                    <p id="questionText" class="text-lg text-gray-700 leading-relaxed">
                        è³ªå•æ–‡ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                    </p>
                </div>

                <!-- å›ç­”ãƒœã‚¿ãƒ³ -->
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <button id="yesButton" onclick="answer(true)" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-4 px-6 rounded-lg transition-colors duration-200">
                        YES
                    </button>
                    <button id="noButton" onclick="answer(false)" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-4 px-6 rounded-lg transition-colors duration-200">
                        NO
                    </button>
                </div>

                <!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
                <button id="backButton" onclick="goBack()" class="hidden w-full bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                    å‰ã®è³ªå•ã«æˆ»ã‚‹
                </button>
            </div>
        </div>
    </div>

    <!-- çµæœãƒšãƒ¼ã‚¸ -->
    <div id="resultPage" class="hidden">
        <div class="min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 py-8 px-4">
            <div class="max-w-2xl mx-auto">
                <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚«ãƒ¼ãƒ‰ -->
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6 text-center fade-in">
                    <div class="mb-6">
                        <div id="characterEmoji" class="text-6xl mb-4">ğŸµ</div>
                        <h1 id="characterName" class="text-3xl font-bold mb-2">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å</h1>
                        <h2 id="resultType" class="text-xl font-bold text-gray-600 mb-4">
                            ã‚¿ã‚¤ãƒ—å
                        </h2>
                        <p id="resultDescription" class="text-gray-600 leading-relaxed mb-4">
                            èª¬æ˜æ–‡
                        </p>
                        <div class="bg-pink-50 rounded-lg p-4 mb-4">
                            <p id="characterCatchphrase" class="text-lg font-medium text-pink-600 italic">
                                "ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚º"
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´° -->
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6 fade-in">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">
                        ğŸ­ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <span class="font-medium text-gray-700">æ€§æ ¼ï¼š</span>
                            <p id="characterPersonality" class="text-gray-600">æ€§æ ¼èª¬æ˜</p>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">æ‹æ„›ã‚¹ã‚¿ã‚¤ãƒ«ï¼š</span>
                            <p id="characterLoveStyle" class="text-gray-600">æ‹æ„›ã‚¹ã‚¿ã‚¤ãƒ«èª¬æ˜</p>
                        </div>
                    </div>
                </div>

                <!-- ã‚¹ã‚³ã‚¢è¡¨ç¤º -->
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6 fade-in">
                    <h3 class="text-xl font-bold text-gray-800 mb-6">
                        ğŸ“Š é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«åˆ†æ
                    </h3>
                    <div id="scoreBars"></div>
                </div>

                <!-- ã‚¢ãƒ‰ãƒã‚¤ã‚¹ -->
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6 fade-in">
                    <h3 class="text-xl font-bold text-gray-800 mb-6">
                        ğŸ’¡ æ‹æ„›é€šä¿¡æ”¹å–„ãƒ‘ãƒƒãƒ
                    </h3>
                    <ul id="adviceList" class="space-y-3"></ul>
                </div>

                <!-- SNSã‚·ã‚§ã‚¢ -->
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6 fade-in">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">
                        ğŸ“± ã‚·ã‚§ã‚¢ã—ã¦æ¨ã—ã‚’åºƒã’ã‚ˆã†ï¼
                    </h3>
                    <textarea id="shareText" readonly class="w-full p-4 border border-gray-300 rounded-lg text-sm bg-gray-50" rows="6"></textarea>
                    <div class="mt-4 flex gap-2">
                        <button onclick="copyShareText()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                            ğŸ“‹ ã‚³ãƒ”ãƒ¼
                        </button>
                        <button onclick="shareOnTwitter()" class="flex-1 bg-sky-500 hover:bg-sky-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                            ğŸ¦ Xã§ã‚·ã‚§ã‚¢
                        </button>
                    </div>
                </div>

                <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
                <div class="text-center fade-in">
                    <button onclick="resetDiagnosis()" class="bg-pink-500 hover:bg-pink-600 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200">
                        ğŸ”„ ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è¨ºæ–­ãƒ‡ãƒ¼ã‚¿
        const questions = [
            // LATï¼ˆé€šä¿¡é€Ÿåº¦ï¼‰
            { id: 1, text: 'è¿”ä¿¡ãŒ24æ™‚é–“ä»¥ä¸Šã‚ãã“ã¨ãŒã‚ˆãã‚ã‚‹ã‹ï¼Ÿ', category: 'LAT' },
            { id: 2, text: 'ã“ã¡ã‚‰ãŒå³ãƒ¬ã‚¹ã—ã¦ã‚‚ç›¸æ‰‹ã®ãƒšãƒ¼ã‚¹ã¯å¤‰ã‚ã‚‰ãªã„ã‹ï¼Ÿ', category: 'LAT' },
            { id: 3, text: 'æ·±å¤œãƒ»æ—©æœã®éå¸¸è­˜ãªé€£çµ¡ã¯æ¥ãªã„ã‹ï¼Ÿ', category: 'LAT' },
            { id: 4, text: 'SNSã¯æ›´æ–°ã—ã¦ã„ã‚‹ã®ã«LINEã¯æœªèª­ã‚¹ãƒ«ãƒ¼ãŒã‚ã‚‹ã‹ï¼Ÿ', category: 'LAT' },
            
            // ACKï¼ˆè¨€è‘‰ãƒ»åå¿œï¼‰
            { id: 5, text: 'å¤‰åŒ–ã«æ°—ã¥ããŒã€Œè¤’ã‚è¨€è‘‰ã€ã¯å°‘ãªã„ã‹ï¼Ÿ', category: 'ACK' },
            { id: 6, text: 'å†™çœŸã‚„ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã«ã‚¹ã‚¿ãƒ³ãƒ—1å€‹ã§çµ‚ã‚ã‚‹ã‹ï¼Ÿ', category: 'ACK' },
            { id: 7, text: 'ç›¸è«‡ã«å¯¾ã—ã¦å…±æ„Ÿã‚ˆã‚Šã€Œè§£æ±ºç­–ã€ãŒå…ˆã«æ¥ã‚‹ã‹ï¼Ÿ', category: 'ACK' },
            { id: 8, text: 'è‡ªåˆ†ã‹ã‚‰è¨€ã‚ãªã„é™ã‚Šã€Œå¥½ãã€ãªã©ã®è¨€è‘‰ã¯ãªã„ã‹ï¼Ÿ', category: 'ACK' },
            { id: 9, text: 'å–§å˜©ã®éš›ã€è¬ã‚‹ã‚ˆã‚Šã‚‚ã€Œç†å±ˆã€ã‚’ä¸¦ã¹ã‚‹ã‹ï¼Ÿ', category: 'ACK' },
            
            // SYNï¼ˆè¡Œå‹•ãƒ»åŒæœŸï¼‰
            { id: 10, text: 'ç§ç‰©ã‚’è²¸ã™ã€é€ã‚Šè¿ãˆãªã©ã®ã‚µãƒãƒ¼ãƒˆã¯ã‚ã‚‹ã‹ï¼Ÿ', category: 'SYN' },
            { id: 11, text: 'é€€å‹¤æ™‚é–“ã‚’åˆã‚ã›ã‚‹ãªã©ã€è¿‘ãã«ã„ã‚ˆã†ã¨ã™ã‚‹ã‹ï¼Ÿ', category: 'SYN' },
            { id: 12, text: 'è¡ŒããŸã„å ´æ‰€ã‚’ã—ã£ã‹ã‚Šäºˆç´„ã—ã¦ãã‚Œã‚‹ã‹ï¼Ÿ', category: 'SYN' },
            { id: 13, text: 'æ—…è¡Œã®ãŠåœŸç”£ã‚’ã‚ã–ã‚ã–è²·ã£ã¦ãã¦ãã‚Œã‚‹ã‹ï¼Ÿ', category: 'SYN' },
            
            // ERRï¼ˆã‚¨ãƒ©ãƒ¼å›é¿ï¼‰
            { id: 14, text: 'çœŸé¢ç›®ãªè©±ã‚’ã—ã‚ˆã†ã¨ã™ã‚‹ã¨è©±é¡Œã‚’é€¸ã‚‰ã™ã‹ï¼Ÿ', category: 'ERR' },
            { id: 15, text: 'ã€Œè©±ã—åˆã„ãŸã„ã€ã¨è¨€ã†ã¨å‹•æºãƒ»ãƒ•ãƒªãƒ¼ã‚ºã™ã‚‹ã‹ï¼Ÿ', category: 'ERR' },
            { id: 16, text: 'æ©Ÿå«Œã‚’æã­ã‚‹ã¨ç†ç”±ã‚’è¨€ã‚ãšå¼•ãã“ã‚‚ã‚‹ã‹ï¼Ÿ', category: 'ERR' },
            
            // CONï¼ˆæ¥ç¶šç›®çš„ï¼‰
            { id: 17, text: 'é€£çµ¡ã¯åŸºæœ¬çš„ã«ç”¨ä»¶ãŒã‚ã‚‹æ™‚ã ã‘ã‹ï¼Ÿ', category: 'CON' },
            { id: 18, text: 'ã€Œä»Šä½•ã—ã¦ã‚‹ï¼Ÿã€ã¨ã„ã£ãŸé›‘è«‡LINEã¯æ¥ãªã„ã‹ï¼Ÿ', category: 'CON' },
            { id: 19, text: 'è¤‡æ•°äººã®å ´ã«ã¯æ¥ã‚‹ãŒã€ã‚µã‚·ã«ã¯æ…é‡ã‹ï¼Ÿ', category: 'CON' },
            { id: 20, text: 'è¡¨æƒ…ã‚„æ…‹åº¦ã‹ã‚‰è€ƒãˆã¦ã„ã‚‹ã“ã¨ãŒèª­ã¿å–ã‚Œãªã„ã‹ï¼Ÿ', category: 'CON' },
        ];

        let currentQuestionIndex = 0;
        let answers = [];

        // ãƒšãƒ¼ã‚¸è¡¨ç¤ºåˆ¶å¾¡
        function showPage(pageId) {
            document.querySelectorAll('[id$="Page"]').forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
        }

        // è¨ºæ–­é–‹å§‹
        function startDiagnosis() {
            console.log('è¨ºæ–­é–‹å§‹ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
            currentQuestionIndex = 0;
            answers = [];
            console.log('è¨ºæ–­ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™');
            showPage('diagnosisPage');
            updateQuestion();
        }

        // è³ªå•æ›´æ–°
        function updateQuestion() {
            console.log('è³ªå•ã‚’æ›´æ–°ã—ã¾ã™ã€‚ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:', currentQuestionIndex);
            const question = questions[currentQuestionIndex];
            console.log('è³ªå•ãƒ‡ãƒ¼ã‚¿:', question);
            
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('currentCategory').textContent = question.category;
            document.getElementById('questionNumber').textContent = question.id;
            document.getElementById('questionText').textContent = question.text;
            
            // é€²æ—ãƒãƒ¼æ›´æ–°
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // æˆ»ã‚‹ãƒœã‚¿ãƒ³è¡¨ç¤ºåˆ¶å¾¡
            const backButton = document.getElementById('backButton');
            if (currentQuestionIndex > 0) {
                backButton.classList.remove('hidden');
            } else {
                backButton.classList.add('hidden');
            }
            
            // ãƒœã‚¿ãƒ³ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('yesButton').disabled = false;
            document.getElementById('noButton').disabled = false;
        }

        // å›ç­”å‡¦ç†
        function answer(isYes) {
            answers.push(isYes);
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                updateQuestion();
            } else {
                showResult();
            }
        }

        // æˆ»ã‚‹
        function goBack() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                answers.pop();
                updateQuestion();
            }
        }

        // ã‚¹ã‚³ã‚¢è¨ˆç®—
        function getScores() {
            const scores = { LAT: 0, ACK: 0, SYN: 0, ERR: 0, CON: 0 };
            
            answers.forEach((answer, index) => {
                if (answer && index < questions.length) {
                    const category = questions[index].category;
                    scores[category]++;
                }
            });
            
            return scores;
        }

        // ã‚¿ã‚¤ãƒ—åˆ¤å®š
        function getDiagnosisType() {
            const q1 = answers[0]; // ç‹¬ç«‹ãƒã‚¤ãƒšãƒ¼ã‚¹å‹
            const q17 = answers[16];
            const q18 = answers[17];
            
            const q2 = answers[1]; // å®Ÿè·µãƒ»èª å®Ÿå‹
            const q10 = answers[9];
            const q12 = answers[11];
            
            const q4 = answers[3]; // å…±æ„Ÿãƒ»å¯†ç€å‹
            const q1_no = !answers[0];
            
            const q14 = answers[13]; // å›é¿ãƒ»ä¸å®‰å®šå‹
            const q16 = answers[15];

            // å„ªå…ˆé †ä½ï¼šå›é¿â†’å…±æ„Ÿâ†’ç‹¬ç«‹â†’å®Ÿè·µ
            if (q1 && q14 && q16) return 'avoidant';
            if (q1_no && q4 && q17) return 'empathetic';
            if (q1 && q17 && q18) return 'independent';
            if (q2 && q10 && q12) return 'practical';
            
            return 'unclassified';
        }

        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±å–å¾—
        function getCharacterInfo(type) {
            const characters = {
                independent: {
                    name: 'ãƒ¦ã‚¦ãƒˆ',
                    emoji: 'ğŸµ',
                    color: '#3B82F6',
                    personality: 'ãƒã‚¤ãƒšãƒ¼ã‚¹ã§è‡ªç”±äººã€‚éŸ³æ¥½ãŒå¥½ãã§ã€ä¸€äººã®æ™‚é–“ã‚’å¤§åˆ‡ã«ã™ã‚‹ã€‚',
                    catchphrase: 'ã¾ã‚ã€æ°—æ¥½ã«ã„ã“ã†ã‚ˆï¼',
                    loveStyle: 'é€£çµ¡ã¯å°‘ãªã‚ã§ã‚‚ã€ä¼šã†ã¨ãã¯å…¨åŠ›ã§æ¥½ã—ã‚€ã‚¿ã‚¤ãƒ—',
                    twitterBio: 'ğŸµ éŸ³ä¿¡ä¸é€šã ã‘ã©å¥½ãã ã‚ˆï½œãƒã‚¤ãƒšãƒ¼ã‚¹æ‹æ„›æ‹…å½“',
                    hashtags: ['#ãƒã‚¤ãƒšãƒ¼ã‚¹å½¼æ°', '#è‡ªç”±äººæ‹æ„›', '#é€£çµ¡ä¸‹æ‰‹']
                },
                practical: {
                    name: 'ã‚±ãƒ³ã‚¸',
                    emoji: 'ğŸ”§',
                    color: '#10B981',
                    personality: 'å®Ÿç›´ã§èª å®Ÿã€‚è¨€è‘‰ã‚ˆã‚Šè¡Œå‹•ã§ç¤ºã™ã‚¿ã‚¤ãƒ—ã€‚',
                    catchphrase: 'ä½•ã‹å›°ã£ãŸã“ã¨ãŒã‚ã£ãŸã‚‰è¨€ã£ã¦ã­',
                    loveStyle: 'ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚„æ‰‹ä¼ã„ãªã©ã€å…·ä½“çš„ãªè¡Œå‹•ã§æ„›æƒ…ã‚’è¡¨ç¾',
                    twitterBio: 'ğŸ”§ è¨€è‘‰ã‚ˆã‚Šè¡Œå‹•ã§å¥½ãã‚’ä¼ãˆã‚‹ï½œå®Ÿç›´æ‹…å½“',
                    hashtags: ['#å®Ÿç›´å½¼æ°', '#è¡Œå‹•æ´¾æ‹æ„›', '#èª å®Ÿã•ã‚“']
                },
                empathetic: {
                    name: 'ãƒãƒ«',
                    emoji: 'ğŸ’•',
                    color: '#EC4899',
                    personality: 'æ„Ÿæƒ…è±Šã‹ã§å…±æ„ŸåŠ›ãŒé«˜ã„ã€‚ã‚¹ã‚­ãƒ³ã‚·ãƒƒãƒ—ãŒå¥½ãã€‚',
                    catchphrase: 'ä»Šã®æ°—æŒã¡ã€æ•™ãˆã¦ãã‚Œã‚‹ã¨å¬‰ã—ã„ãª',
                    loveStyle: 'æ¯æ—¥ã®é€£çµ¡ã¨æ„Ÿæƒ…ã®å…±æœ‰ã‚’å¤§åˆ‡ã«ã™ã‚‹ç”˜ãˆã‚“åŠã‚¿ã‚¤ãƒ—',
                    twitterBio: 'ğŸ’• æ¯æ—¥é€£çµ¡ã—ã¦ã»ã—ã„ï½œå…±æ„Ÿæ‹…å½“',
                    hashtags: ['#ç”˜ãˆã‚“åŠå½¼æ°', '#å…±æ„Ÿã•ã‚“', '#æ¿ƒåšæ„›']
                },
                avoidant: {
                    name: 'ãƒªãƒ§ã‚¦',
                    emoji: 'ğŸ›¡ï¸',
                    color: '#6B7280',
                    personality: 'ã‚·ãƒ£ã‚¤ã§æ…é‡ã€‚è¡çªã‚’é¿ã‘ã‚‹å¹³å’Œä¸»ç¾©è€…ã€‚',
                    catchphrase: 'ã¾ãŸä»Šåº¦ã§ã„ã„ã‹ãªâ€¦',
                    loveStyle: 'å–§å˜©ã‚’é¿ã‘ã¦ã€ç©ã‚„ã‹ãªé–¢ä¿‚ã‚’ä¿ã¨ã†ã¨ã™ã‚‹',
                    twitterBio: 'ğŸ›¡ï¸ å–§å˜©ã¯å«Œã„ã ãªâ€¦ï½œå›é¿æ‹…å½“',
                    hashtags: ['#ã‚·ãƒ£ã‚¤å½¼æ°', '#å–§å˜©å«Œã„', '#å¹³å’Œä¸»ç¾©']
                }
            };
            return characters[type] || characters.independent;
        }

        // ã‚¿ã‚¤ãƒ—æƒ…å ±å–å¾—
        function getTypeInfo(type) {
            const types = {
                independent: {
                    name: 'ç‹¬ç«‹ãƒã‚¤ãƒšãƒ¼ã‚¹å‹',
                    description: 'è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ã€æŸç¸›ã‚’å«Œã†ã‚¿ã‚¤ãƒ—ã€‚é€£çµ¡ã¯å°‘ãªã‚ã§ã‚‚å¥½æ„ã¯ã‚ã‚‹ã€‚'
                },
                practical: {
                    name: 'å®Ÿè·µãƒ»èª å®Ÿå‹',
                    description: 'è¡Œå‹•ã§æ„›æƒ…ã‚’ç¤ºã™ã‚¿ã‚¤ãƒ—ã€‚è¨€è‘‰ã‚ˆã‚Šå®Ÿè·µçš„ãªã‚µãƒãƒ¼ãƒˆã§æ°—æŒã¡ã‚’è¡¨ç¾ã™ã‚‹ã€‚'
                },
                empathetic: {
                    name: 'å…±æ„Ÿãƒ»å¯†ç€å‹',
                    description: 'æ„Ÿæƒ…ã®å…±æœ‰ã‚’é‡è¦–ã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚å¯†ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ±‚ã‚ã‚‹ã€‚'
                },
                avoidant: {
                    name: 'å›é¿ãƒ»ä¸å®‰å®šå‹',
                    description: 'è¡çªã‚’é¿ã‘ã€æ„Ÿæƒ…çš„ãªè©±é¡Œã‹ã‚‰é€ƒã’ã‚‹ã‚¿ã‚¤ãƒ—ã€‚å®‰å®šé–¢ä¿‚ã‚’ç¯‰ãã®ãŒèª²é¡Œã€‚'
                },
                unclassified: {
                    name: 'æœªåˆ†é¡ï¼ˆèª¿æ•´ä¸­ï¼‰',
                    description: 'ç‰¹å¾´ãŒã¯ã£ãã‚Šã—ãªã„ã‚¿ã‚¤ãƒ—ã€‚ã‚ˆã‚Šè©³ç´°ãªåˆ†æãŒå¿…è¦ã€‚'
                }
            };
            return types[type] || types.unclassified;
        }

        // ã‚¢ãƒ‰ãƒã‚¤ã‚¹å–å¾—
        function getAdvice(type) {
            const baseAdvice = [
                'ã€Œè¡¨æƒ…ã€ã§ã¯ãªãã€Œå±¥æ­´ã€ã‚’ä¿¡ã˜ã‚‹ï¼ˆè¡Œå‹•ãƒ­ã‚°é‡è¦–ï¼‰',
                'ã€Œæ„Ÿæƒ…ã€ã§ã¯ãªãã€ŒãŠé¡˜ã„ã€ã§ä¼ãˆã‚‹ï¼ˆå…·ä½“çš„ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰',
                'ã€Œé€£çµ¡ã€ï¼ã€Œæ„›æƒ…ã€ã§ã¯ãªã„ï¼ˆè¿”ä¿¡é€Ÿåº¦ã¨å¥½æ„ã‚’åˆ‡ã‚Šé›¢ã™ï¼‰'
            ];

            // ã‚¿ã‚¤ãƒ—åˆ¥ã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ä¸¦ã³æ›¿ãˆã‚‹ï¼ˆä»®å®Ÿè£…ï¼‰
            switch (type) {
                case 'independent':
                    return [baseAdvice[2], baseAdvice[0], baseAdvice[1]];
                case 'practical':
                    return [baseAdvice[0], baseAdvice[1], baseAdvice[2]];
                case 'empathetic':
                    return [baseAdvice[1], baseAdvice[2], baseAdvice[0]];
                case 'avoidant':
                    return [baseAdvice[1], baseAdvice[0], baseAdvice[2]];
                default:
                    return baseAdvice;
            }
        }

        // çµæœè¡¨ç¤º
        function showResult() {
            const type = getDiagnosisType();
            const typeInfo = getTypeInfo(type);
            const character = getCharacterInfo(type);
            const scores = getScores();
            const advice = getAdvice(type);

            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
            document.getElementById('characterEmoji').textContent = character.emoji;
            document.getElementById('characterName').textContent = character.name;
            document.getElementById('characterName').style.color = character.color;
            document.getElementById('resultType').textContent = typeInfo.name;
            document.getElementById('resultDescription').textContent = typeInfo.description;
            
            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°
            document.getElementById('characterPersonality').textContent = character.personality;
            document.getElementById('characterCatchphrase').textContent = `"${character.catchphrase}"`;
            document.getElementById('characterLoveStyle').textContent = character.loveStyle;

            // ã‚¹ã‚³ã‚¢ãƒãƒ¼ç”Ÿæˆ
            const scoreBars = document.getElementById('scoreBars');
            const maxScores = { LAT: 4, ACK: 5, SYN: 4, ERR: 3, CON: 4 };
            
            scoreBars.innerHTML = Object.entries(scores).map(([category, score]) => `
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm font-medium text-gray-700">${category}ï¼ˆ${getCategoryName(category)}ï¼‰</span>
                        <span class="text-sm text-gray-600">${score}/${maxScores[category]}</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-pink-400 to-purple-500 h-3 rounded-full transition-all duration-500" 
                             style="width: ${(score / maxScores[category]) * 100}%"></div>
                    </div>
                </div>
            `).join('');

            // ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãƒªã‚¹ãƒˆç”Ÿæˆ
            const adviceList = document.getElementById('adviceList');
            adviceList.innerHTML = advice.map((item, index) => `
                <li class="flex items-start">
                    <span class="flex-shrink-0 w-6 h-6 bg-pink-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3 mt-0.5">
                        ${index + 1}
                    </span>
                    <span class="text-gray-700 leading-relaxed">${item}</span>
                </li>
            `).join('');

            // SNSã‚·ã‚§ã‚¢ç”¨ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ
            const shareText = `ã€æ‹æ„›ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨ºæ–­ã€‘\nç§ã®ã‚¿ã‚¤ãƒ—ã¯${typeInfo.name}ï¼\næ¨ã—ã‚­ãƒ£ãƒ©ã¯${character.name}${character.emoji}\n${character.catchphrase}\n\n${character.twitterBio}\n${character.hashtags.join(' ')}`;
            document.getElementById('shareText').value = shareText;

            showPage('resultPage');
        }

        // ã‚«ãƒ†ã‚´ãƒªåå–å¾—
        function getCategoryName(category) {
            const names = {
                LAT: 'é€šä¿¡é€Ÿåº¦',
                ACK: 'è¨€è‘‰ãƒ»åå¿œ',
                SYN: 'è¡Œå‹•ãƒ»åŒæœŸ',
                ERR: 'ã‚¨ãƒ©ãƒ¼å›é¿',
                CON: 'æ¥ç¶šç›®çš„'
            };
            return names[category] || category;
        }

        // ãƒªã‚»ãƒƒãƒˆ
        function resetDiagnosis() {
            showPage('homePage');
        }

        // SNSã‚·ã‚§ã‚¢æ©Ÿèƒ½
        function copyShareText() {
            const shareText = document.getElementById('shareText');
            shareText.select();
            document.execCommand('copy');
            
            // ã‚³ãƒ”ãƒ¼å®Œäº†ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'âœ… ã‚³ãƒ”ãƒ¼å®Œäº†ï¼';
            button.classList.add('bg-green-500', 'hover:bg-green-600');
            button.classList.remove('bg-blue-500', 'hover:bg-blue-600');
            
            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('bg-green-500', 'hover:bg-green-600');
                button.classList.add('bg-blue-500', 'hover:bg-blue-600');
            }, 2000);
        }

        function shareOnTwitter() {
            const shareText = document.getElementById('shareText').value;
            const encodedText = encodeURIComponent(shareText);
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodedText}`;
            window.open(twitterUrl, '_blank', 'width=600,height=400');
        }
    </script>
</body>
</html>
